
inputs:
  - name: puertorico
    metadata: "data/puerto-rico_metadata_2022-05-12.tsv"
    sequences: "data/puerto-rico_sequences_2022-05-12.fasta"
  - name: northamerica
    metadata: "data/hcov_north-america_metadata_2022-05-13.tsv"
    sequences: "data/hcov_north-america_sequences_2022-05-13.fasta"
  - name: reference
    metadata: "data/hcov_reference_metadata_2022-05-13.tsv"
    sequences: "data/hcov_reference_sequences_2022-05-13.fasta"

builds:
  Puerto-Rico_all-time:
    subsampling_scheme: all-time
    title: "Phylogenetic Analysis of SARS-CoV-2 in Puerto Rico - Focused Since Pandemic Start"
  Puerto-Rico_six-months:
    subsampling_scheme: six-months
    title: "Phylogenetic Analysis of SARS-CoV-2 in Puerto Rico - Focused Last 6 months"

# Subsampling parameters
subsampling:
  all-time:
    local_focus:
      group_by: "year month"
      max_sequences: 3000
      query: --query "(puertorico == 'yes')"
    northamerica_context:
      group_by: "division year month"
      max_sequences: 1000
      query: --query "(northamerica == 'yes')"
      priorities:
        type: proximity
        focus: local_focus
    reference_context:
      group_by: "region year month"
      max_sequences: 500
      query: --query "(reference == 'yes')"
      priorities:
        type: proximity
        focus: local_focus

  six-months:
    local_focus_late:
      group_by: "year month"
      max_sequences: 1500
      min_date: "--min-date 6M"
      query: --query "(puertorico == 'yes')"
    usa_context_late:
      group_by: "division year month"
      max_sequences: 500
      min_date: "--min-date 6M"
      query: --query "(northamerica == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_late
    reference_context_late:
      group_by: "region year month"
      max_sequences: 250
      min_date: "--min-date 6M"
      query: --query "(reference == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_late

    local_focus_early:
      group_by: "year month"
      max_sequences: 1500
      max_date: "--max-date 6M"
      query: --query "(puertorico == 'yes')"
    usa_context_early:
      group_by: "division year month"
      max_sequences: 500
      max_date: "--max-date 6M"
      query: --query "(northamerica == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_early
    reference_context_early:
      group_by: "region year month"
      max_sequences: 250
      max_date: "--max-date 6M"
      query: --query "(reference == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_early

files:
  auspice_config: "my_profiles/puertorico_multiple/my_auspice_config.json"
  description: "my_profiles/puertorico_multiple/my_description.md"

traits:
  Puerto-Rico_all-time:
    sampling_bias_correction: 5.0
    columns: ["country"]
  Puerto-Rico_six-months:
    sampling_bias_correction: 5.0
    columns: ["country"]

frequencies:
  Puerto-Rico_six-months:
    min_date: "6M"
  Puerto-Rico_all-time:
    recent_days_to_censor: 7
    min_date: "2020-01-01"
