inputs:
# Puerto Rico data
  - name: puertorico 
    metadata: "data/puerto-rico_omicron_metadata_2022-05-23.tsv"
    sequences: "data/puerto-rico_omicron_sequences_2022-05-23.fasta"
# North America context
  - name: northamerica
    metadata: "data/hcov_north-america_metadata_2022-05-22.tsv"
    sequences: "data/hcov_north-america_sequences_2022-05-22.fasta"
# South America context
  - name: southamerica
    metadata: "data/hcov_south-america_metadata_2022-05-22.tsv"
    sequences: "data/hcov_south-america_sequences_2022-05-22.fasta"
# Europe context
  - name: europe
    metadata: "data/hcov_europe_metadata_2022-05-22.tsv"
    sequences: "data/hcov_europe_sequences_2022-05-22.fasta"

builds:
  Puerto-Rico_all-time:
    subsampling_scheme: all-time
    title: "Phylogenetic Analysis of SARS-CoV-2 in Puerto Rico - Focused since pandemic start"
  Puerto-Rico_six-months:
    subsampling_scheme: six-months
    title: "Phylogenetic Analysis of SARS-CoV-2 in Puerto Rico - Focused over the past 6 months"

# Subsampling parameters
subsampling:
  all-time:
    local_focus:
      group_by: "year month"
      max_sequences: 4000
      query: --query "(puertorico == 'yes')"
    northamerica_context:
      group_by: "division year month"
      max_sequences: 600
      query: --query "(northamerica == 'yes')"
      priorities:
        type: proximity
        focus: local_focus
    southamerica_context:
      group_by: "country year month"
      max_sequences: 250
      query: --query "(southamerica == 'yes')"
      priorities:
        type: proximity
        focus: local_focus
    europe_context:
      group_by: "country year month"
      max_sequences: 150
      query: --query "(europe == 'yes')"
      priorities:
        type: proximity
        focus: local_focus

  six-months:
    local_focus_late:
      group_by: "year month"
      max_sequences: 3000
      min_date: "--min-date 6M"
      query: --query "(puertorico == 'yes')"
    na_context_late:
      group_by: "division year month"
      max_sequences: 600
      min_date: "--min-date 6M"
      query: --query "(northamerica == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_late
    sa_context_late:
      group_by: "country year month"
      max_sequences: 200
      min_date: "--min-date 6M"
      query: --query "(southamerica == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_late
    europe_context_late:
      group_by: "country year month"
      max_sequences: 200
      min_date: "--min-date 6M"
      query: --query "(europe == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_late

    local_focus_early:
      group_by: "year month"
      max_sequences: 600
      max_date: "--max-date 6M"
      query: --query "(puertorico == 'yes')"
    na_context_early:
      group_by: "division year month"
      max_sequences: 200
      max_date: "--max-date 6M"
      query: --query "(northamerica == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_early
    sa_context_early:
      group_by: "country year month"
      max_sequences: 100
      max_date: "--max-date 6M"
      query: --query "(southamerica == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_early
    europe_context_early:
      group_by: "country year month"
      max_sequences: 100
      max_date: "--max-date 6M"
      query: --query "(europe == 'yes')"
      priorities:
        type: proximity
        focus: local_focus_early

files:
  auspice_config: "my_profiles/puertorico_multiple/my_auspice_config.json"
  description: "my_profiles/puertorico_multiple/my_description.md"

traits:
  Puerto-Rico_all-time:
    sampling_bias_correction: 5.0
    columns: ["country"]
  Puerto-Rico_six-months:
    sampling_bias_correction: 5.0
    columns: ["country"]

frequencies:
  Puerto-Rico_six-months:
    min_date: "6M"
  Puerto-Rico_all-time:
    recent_days_to_censor: 7
    min_date: "2020-01-01"
